import{u as j,j as e,B as m,a as f,r as g,d as n}from"./index-e6dd49ca.js";import{c as w}from"./formating-5db864bf.js";function C({data:s}){const t=`/api/${s.image}`,r=j(),a=()=>{r(f({iteam:s}))},c=()=>{r(g({iteam:s}))};return e.jsx("li",{className:"meal-item",children:e.jsxs("article",{children:[e.jsx("img",{src:t,alt:s.name}),e.jsxs("div",{children:[e.jsx("h3",{children:s.name}),e.jsx("p",{className:"meal-item-price",children:w.format(s.price)}),e.jsx("p",{className:"meal-item-description ",children:s.description})]}),e.jsxs("p",{className:"meal-item-actions ",children:[e.jsx(m,{onClick:i=>a(),children:"Add to cart"}),e.jsx(m,{onClick:i=>c(),children:"Remove to cart"})]})]})})}async function E(s,t){const r=await fetch(s,t),a=await r.json();if(!r.ok)throw new Error(a.message||"Something went wrong, failed to send request.");return a}function k(s,t,r){const[a,c]=n.useState(r),[i,d]=n.useState(!1),[u,h]=n.useState();function p(){c(r)}const o=n.useCallback(async function(x){d(!0);try{const l=await E(s,{...t,body:x});c(l)}catch(l){h(l.message||"Something went wrong!")}d(!1)},[s,t]);return n.useEffect(()=>{(t&&(t.method==="GET"||!t.method)||!t)&&o()},[o,t]),{data:a,isLoading:i,error:u,sendRequest:o,clearData:p}}function N({title:s,msg:t}){return e.jsxs("div",{className:"error",children:[e.jsx("h2",{children:s}),e.jsx("p",{children:t})]})}const S={};function R(){const{data:s,isLoading:t,error:r}=k("/api/meals",S,[]);return t?e.jsx("p",{className:"center",children:"Fetching meals..."}):r?e.jsx(N,{title:"Failed to fetch meals",message:r}):e.jsx("ul",{id:"meals",children:s.map(a=>e.jsx(C,{data:a},a.id))})}export{R as default};
